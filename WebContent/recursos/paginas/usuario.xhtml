<ui:composition template="/WEB-INF/paginas/template.xhtml" xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html" xmlns:p="http://primefaces.org/ui">

	<ui:define name="title">#{strg['label.usuarios']}</ui:define>
	<ui:define name="body">
		<p:panel id="usuarioEditor">
			<h:panelGrid columns="2">
				<h:form id="usuarioForm" prependId="false" enctype="multipart/form-data" acceptcharset="UTF-8">
					<p:growl id="growl" showDetail="true" sticky="true" globalOnly="true" />
					<h:panelGrid columns="3" layout="grid">
						<p:outputLabel value="#{strg['label.codigo']}" for="codigo" rendered="#{usuarioBean.edicao}" />
						<p:inputText id="codigo" value="#{usuarioBean.usuario.id}" required="true" size="50" disabled="true" rendered="#{usuarioBean.edicao}" />
						<p:message for="codigo" rendered="#{usuarioBean.edicao}" />

						<p:outputLabel value="#{strg['label.nome']}" for="nome" />
						<p:inputText id="nome" value="#{usuarioBean.usuario.irmao.nome}" required="true" size="50" />
						<p:message for="nome" />

						<p:outputLabel value="#{strg['label.email']}" for="email" />
						<p:inputText id="email" value="#{usuarioBean.usuario.email}" required="true" size="50" />
						<p:message for="email" />

						<p:outputLabel value="#{strg['label.senha']}" for="senha" rendered="#{!usuarioBean.edicao}" />
						<p:password id="senha" redisplay="true" value="#{usuarioBean.usuario.senha}" inline="true" feedback="true" required="true" goodLabel="#{strg['label.bom']}" weakLabel="#{strg['label.fraco']}" strongLabel="#{strg['label.excelente']}" promptLabel="#{strg['label.senha']}" size="50" rendered="#{!usuarioBean.edicao}" />
						<p:message for="senha" rendered="#{!usuarioBean.edicao}" />
						<p:outputLabel value="#{strg['label.confimeASenha']}" for="confirmeSenha" rendered="#{!usuarioBean.edicao}" />
						<p:password id="confirmeSenha" redisplay="true" value="#{usuarioBean.usuario.confirmeSenha}" required="true" size="50" rendered="#{!usuarioBean.edicao}" />
						<p:message for="confirmeSenha" rendered="#{!usuarioBean.edicao}" />

						<p:outputLabel value="#{strg['label.foto']}" for="imagem" />
						<h:inputFile id="imagem" styleClass="inputFile" value="#{usuarioBean.imageFile}" autocomplete="off">
							<f:validator validatorId="imageValidator" />
						</h:inputFile>
						<p:message for="imagem" />

						<p:outputLabel value="#{strg['label.observacao']}" for="observacao" />
						<p:inputTextarea id="observacao" value="#{usuarioBean.usuario.irmao.observacao}" cols="53" rows="2" />
						<p:message for="observacao" />
					</h:panelGrid>
					<h:commandButton value="#{strg['label.salvar']}" action="#{usuarioBean.salvar}" style="margin-top: 10px;">
						<f:ajax execute="usuarioEditor" render="@all"></f:ajax>
					</h:commandButton>
					<h:commandButton value="#{strg['label.novo']}" action="#{usuarioBean.novo()}" style="margin-top: 10px;" rendered="#{usuarioBean.edicao}">
						<f:ajax render="usuarioEditor" />
					</h:commandButton>
				</h:form>
				<h:panelGroup rendered="#{usuarioBean.edicao}">
					<div align="center" style="border: 1px solid gray; margin: -25px 30px 30px 30px; padding: 5px;">
						<h:graphicImage value="../../imagemstream/usuario/#{usuarioBean.usuario.id}" height="120" width="120" />
					</div>
				</h:panelGroup>
			</h:panelGrid>
		</p:panel>

		<p:spacer height="15">
		</p:spacer>



		<p:dataTable id="tabelaUsuarios" var="usuarioTemp" value="#{usuarioBean.usuarioDataModel}" paginator="true" rows="10" lazy="true" resizableColumns="true" sortBy="#{usuarioTemp.id}" sortOrder="ascending" emptyMessage="#{strg['message.nenhumRegistroEncontrado']}" selection="#{usuarioBean.usuario}" selectionMode="single">
			<p:ajax event="rowSelect" update="@([id$=usuarioEditor])" process="@([id$=tabelaUsuarios])" />
			<p:column width="7%">
				<f:facet name="header"> #{strg['label.codigo']} </f:facet>
				<div class="colunaCodigo">
					<h:outputText value="#{usuarioTemp.id}" title="#{usuarioTemp.id}" />
				</div>
			</p:column>
			<p:column width="28%">
				<f:facet name="header"> #{strg['label.nome']} </f:facet>
				<h:graphicImage value="../../imagemstream/usuario/#{usuarioTemp.id}" height="20" width="20" />
				<h:outputText value="#{usuarioTemp.irmao.nome}" title="#{usuarioTemp.irmao.nome}" />
			</p:column>
			<p:column width="15%">
				<f:facet name="header"> #{strg['label.email']} </f:facet>
				<a href="mailto:#{usuarioTemp.email}" title="#{usuarioTemp.email}">#{usuarioTemp.email}</a>
			</p:column>
			<p:column width="15%">
				<f:facet name="header">#{strg['label.dataCadastro']}</f:facet>
				<div class="colunaData">
					<h:outputFormat value="#{usuarioTemp.dataCadastro}" title="#{usuarioTemp.dataCadastro}" />
				</div>
			</p:column>
			<p:column>
				<f:facet name="header">#{strg['label.observacao']}</f:facet>
				<h:outputText value="#{usuarioTemp.irmao.observacao}" title="#{usuarioTemp.irmao.observacao}" />
			</p:column>
			<p:column width="8%">
				<f:facet name="header">#{strg['label.acoes']}</f:facet>
			</p:column>
		</p:dataTable>

	</ui:define>

</ui:composition>
